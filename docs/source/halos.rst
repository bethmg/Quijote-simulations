.. _halo_catalogues:

Halo catalogues
===============

Quijote contains FoF and Rockstar halo catalogs.

FoF
~~~

The FoF halo catalogs can be read through the `readfof.py <https://github.com/franciscovillaescusa/Pylians3/blob/master/library/readfof.py>`_ script. If you have `Pylians <https://github.com/franciscovillaescusa/Pylians3>`_ installed you already have it. An example on how to read a halo catalog is this (we provide further details on how to read and manipulate these catalogs in :ref:`tutorials`):

.. code-block:: python
		
    import readfof 

    # input files
    snapdir = '/home/fvillaescusa/Quijote/Halos/s8_p/145/' #folder hosting the catalogue
    snapnum = 4                                            #redshift 0

    # determine the redshift of the catalogue
    z_dict = {4:0.0, 3:0.5, 2:1.0, 1:2.0, 0:3.0}
    redshift = z_dict[snapnum]

    # read the halo catalogue
    FoF = readfof.FoF_catalog(snapdir, snapnum, long_ids=False,
		              swap=False, SFR=False, read_IDs=False)
										
    # get the properties of the halos
    pos_h = FoF.GroupPos/1e3            #Halo positions in Mpc/h
    mass  = FoF.GroupMass*1e10          #Halo masses in Msun/h
    vel_h = FoF.GroupVel*(1.0+redshift) #Halo peculiar velocities in km/s
    Npart = FoF.GroupLen                #Number of CDM particles in the halo

The number in the name of the halo catalogue represents its redshift:

- 000 ------> z=3
- 001 ------> z=2
- 002 ------> z=1
- 003 ------> z=0.5
- 004 ------> z=0

.. Note::

   The above correspondence applies to the majority of the simulations but not to all of them. For instance, for Quijote-ODD, 000 represents redshift 1 while 001 corresponds to redshift 0. Thus, we always recommend reading the redshift of the correspond snapshot.


Rockstar
~~~~~~~~

Quijote also contain Rockstar halo catalogs. A typical Rockstar folder will contain the following files:

- ``out_X.list``. These are the Rockstar-generated halo+subhalo catalogs. X usually goes from 0 to 4, and it represents the snapshot number. E.g. the rockstar catalog corresponding to the snapdir_004 would be out_4.list. Those are ASCII files where the header describes the content of the file.
- ``out_X_pid.list``. These are the Rockstar-generated halo+subhalo catalogs. X usually goes from 0 to 4, and it represents the snapshot number. E.g. the rockstar catalog corresponding to the snapdir_004 would be out_4.list. Those are ASCII files where the header describes the content of the file. The main difference between these files and the ``out_X.list`` is that ``out_X_pid.list`` contains an additional column called PID that allow to distinguish between halos and halos. For halos :math:`{\rm PID}=-1` while for subhalos PID is the parent halo ID.
- ``rockstar_params.cfg``. This file contains the Rockstar parameter file.
- ``rockstar.slurm``. This file contains the slurm submission script used to run Rockstar.
- ``rockstar.slurm``. This file contains the output from the slurm script.
- ``rockstar.cfg``. The Rockstar-generated configuration file. This is generated by Rockstar when running it.
- ``output.dat``. The output generated by Rockstar when running it.

In general, we recommend using the ``out_X_pid.list`` files that can be read easily with something like this:

.. code-block:: python

   import numpy as np

   # catalog file
   f_catalog = '/home/fvillaescusa/Quijote/Halos/fiducial/0/out_4_pid.list'
   
   # read the halo catalog
   data = np.loadtxt('f_catalog')

   # we can now get the different properties of the halos
   Mvir = data[:,2]
   Vmax = data[:,3]
   PID  = data[:,41] 
   
   
